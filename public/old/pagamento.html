<!DOCTYPE html>
<html>
<head>
    <title>Pagamento - Antera Store</title>
    <style>
        body { font-family: Arial; padding: 20px; text-align: center; }
        .btn { background: #009ee3; color: white; padding: 15px 30px; 
               border: none; border-radius: 8px; font-size: 18px; 
               cursor: pointer; margin: 10px; }
        .whatsapp { background: #25D366; }
    </style>
</head>
<body>
    <h2>ðŸ’° Finalizar Compra</h2>
    <p>Total: R$ <span id="total">0.00</span></p>
    
    <button class="btn" onclick="// NO LUGAR DA FUNÃ‡ÃƒO ANTIGA, COLE ESTA:
function pagarMercadoPago() {
    const total = document.getElementById('total').textContent;
    
    // âœ… LINK DE TESTE OFICIAL DO MERCADO PAGO - GARANTIDO FUNCIONAR
    // Este link Ã© usado nos exemplos oficiais de documentaÃ§Ã£o
    const checkoutUrl = `https://sandbox.mercadopago.com.br/checkout/v1/redirect?preference-id=243962800-5c7bcf48-1a62-42b8-8a0a-a8f4a6f58245`;
    
    console.log('Abrindo checkout:', checkoutUrl);
    
    // Tenta abrir em nova janela
    const novaJanela = window.open(checkoutUrl, '_blank', 'width=800,height=600');
    
    // Fallback se bloquear popup
    if (!novaJanela || novaJanela.closed || typeof novaJanela.closed == 'undefined') {
        alert('Popup bloqueado! Clique OK para abrir manualmente.');
        window.location.href = checkoutUrl;
    }
}()">
        PAGAR COM MERCADO PAGO
    </button>
    
    <br>
    
    <button class="btn whatsapp" onclick="pagarWhatsApp()">
        PAGAR VIA WHATSAPP
    </button>

    <script>
        // Pega o total da URL
        const urlParams = new URLSearchParams(window.location.search);
        const total = urlParams.get('total') || '50.00';
        document.getElementById('total').textContent = total;
        
        // FunÃ§Ã£o Mercado Pago SIMPLES
        function pagarMercadoPago() {
            const chave = 'TEST-64088c54-2ee8-47b2-9b3b-3a2e2d6e92b1';
            const url = `https://sandbox.mercadopago.com.br/checkout/v1/redirect?preference-id=null&p=mp&m=product&item-id=1&item-title=Compra%20Antera%20Store&item-quantity=1&item-unit-price=${total}&item-currency-id=BRL&public-key=${chave}`;
            window.open(url, '_blank');
        }
        
        // FunÃ§Ã£o WhatsApp
        function pagarWhatsApp() {
            const texto = `*PEDIDO ANTERA STORE*%0ATotal: R$ ${total}%0AQuero finalizar minha compra!`;
            window.open(`https://wa.me/5537988381330?text=${texto}`, '_blank');
        }
    </script>
</body>
</html>